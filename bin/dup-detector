#!/bin/bash

target="${1%/}"
dupfile="/tmp/.dupfile"

if [[ -z "$target" ]]
then echo "Use the 1st arg to specify which folder should we deted duplicates in." && exit 1
fi

echo "Detecting duplicates in $target"

rm -f $dupfile && touch $dupfile

while IFS= read -r -d '' f
do
  dup="$(grep "$(basename "$f")" "$dupfile")"
  if [[ -n "$dup" ]]
  then echo "Duplicates: $f $dup"
  else echo "$f" >> $dupfile
  fi
done < <(find "$target" -print0 -type f)
